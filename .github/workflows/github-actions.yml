name: Build and deploy LFM.Authorization

env:
  GITHUB_NAMESPACE: ThijmenBrand-LifeManager
  GITHUB_USERNAME: ThijmenBrand
  BUILD_CONFIGURATION: Release
  SOLUTION_FILE: LFM.Authorization/LFM.Authorization.sln
  PROJECT_FILE: LFM.Authorization/LFM.Authorization.AspNetCore/LFM.Authorization.AspNetCore.csproj

on:
  workflow_dispatch:
  push:
    branches:
      - develop
      - release

jobs:
  # build-and-publish-package:
  #   uses: ThijmenBrand-LifeManager/LFM.Pipelines/.github/workflows/build-package.yml@main
  #   with:
  #     solution-file: LFM.Authorization/LFM.Authorization.sln
  #     project-file: LFM.Authorization/LFM.Authorization.AspNetCore/LFM.Authorization.AspNetCore.csproj
  #     build-configuration: Release
  #     dotnet-version: 8.0.x
  #   secrets: inherit

  # build-and-test:
  #   uses: ThijmenBrand-LifeManager/LFM.Pipelines/.github/workflows/build-and-test.yml@main
  #   with:
  #     dotnet-version: 8.0.x
  #     solution-file: LFM.Authorization/LFM.Authorization.sln
  #     build-configuration: Release
  #   secrets: inherit

  deploy-image:
    name: Deploy to Env
    uses: ThijmenBrand-LifeManager/LFM.Pipelines/.github/workflows/build-docker-image.yml@main
    with:
      environment: develop
      dockerfile-path: |-
        LFM.Authorization/api.Dockerfile
        LFM.Authorization.endpoint.Dockerfile
