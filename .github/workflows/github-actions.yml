name: Build and deploy LFM.Authorization

env:
  GITHUB_NAMESPACE: ThijmenBrand-LifeManager
  GITHUB_USERNAME: ThijmenBrand
  BUILD_CONFIGURATION: Release
  SOLUTION_FILE: LFM.Authorization/LFM.Authorization.sln
  PROJECT_FILE: LFM.Authorization/LFM.Authorization.AspNetCore/LFM.Authorization.AspNetCore.csproj

on:
  workflow_dispatch:
  push:
    branches:
      - develop
      - release

jobs:
  build-and-publish-package:
    uses: ./.github/workflows/build-package.yml
    with:
      solution-file: LFM.Authorization/LFM.Authorization.sln
      project-file: LFM.Authorization/LFM.Authorization.AspNetCore/LFM.Authorization.AspNetCore.csproj
      build-configuration: Release
      dotnet-version: 8.0.x
    secrets: inherit

  build-and-test:
    uses: ./.github/workflows/build-and-test.yml
    with:
      dotnet-version: 8.0.x
      solution-file: LFM.Authorization/LFM.Authorization.sln
      build-configuration: Release
    secrets: inherit
